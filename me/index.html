<html>
<head>
<title>index form</title>
<script src="./jquery-3.6.3.min.js"></script>
<script>
var idx = 0;
function coladd() {
        //ID入手
        var table = document.getElementById("table");
        // 行を行末に追加
        var row = table.insertRow(-1);
        //乱数
        var random  = Math.floor( Math.random() * 900 ) + 100;
        var randomm = Math.floor( Math.random() * 1000 )
        //現在時刻を取得
        const date = new Date();
        const 
            H = date.getHours(), //時
            M = date.getMinutes(), //分
            S = date.getSeconds(), //秒
            MS = date.getMilliseconds();//ミリ秒
        
        //td分追加
        var cell1 = row.insertCell(-1);
        var cell2 = row.insertCell(-1);
        var cell3 = row.insertCell(-1);
        var cell4 = row.insertCell(-1);
        var cell5 = row.insertCell(-1);
        var cell6 = row.insertCell(-1);
        // セルの内容入力
        cell1.innerHTML = random + '.' + randomm;
        cell2.innerHTML = H + 'h ' + M +'m '+ S + '.' + MS + 's';
        cell3.innerHTML = '値：' + ( idx + 1 ) * 10 + '(V)';
        cell4.innerHTML = '<input type="text" id="box[]">';
        cell5.innerHTML = 'IMAGE NULL';
        cell6.innerHTML = '<input type="button" value="delete" id="coladd" onclick="coldel(this)">';
        ++idx;
        if (idx > 30) {
            idx = 0;
        }
    }
    function coldel(obj) {
        // 削除ボタンを押下された行を取得
        tr = obj.parentNode.parentNode;
        // trのインデックスを取得して行を削除する
        tr.parentNode.deleteRow(tr.sectionRowIndex);
}

function deletion(){
    var table = document.getElementById("table");
    var r = table.rows.length;
    if( r > 1 ){
        table.deleteRow(r-1);
        
    }  
}
function alldeletion(){
    var table = document.getElementById("table");
    var r = table.rows.length;
    var index = 0;
    if( r > 1 ){
        for (index = r; index > 1 ; index--){
            table.deleteRow(index - 1);
        }
    }  
}

</script>
</head>
<body>
    <p>Add Row?   <input type="button" value="add" id="coladd" onclick="coladd()"></p>
    <p>Delete Row?<input type="button" value="del" id="delete" onclick="deletion()"></p>
    <p>All Delete <input type="button" value="alldelete" id="ald" onclick="alldeletion()"></p>
    <table id="table" border="1">
        <tr>
            <td>IP</td><td>TIME</td><td>VALUE</td><td>GAP</td><td>IMAGES</td><td>DELETE</td>
        </tr>
    </table>
    <!------入力てすと-->
<p>
    <input type="button" value="INPUT FORM" id="idxbtn">
</p>
<p>
    <label><input type="text" value="0" id="nText"></label>
    <input type="button" value="Check" id="checkButton">
</p>
<p id="msg"></p>
<script>
    function buttonClick(){
        msg.innerText = 'Your number is ' + nText.value ;
    }
    var nText = document.getElementById('nText');
    let checkButon = document.getElementById('checkButton');
    checkButton.addEventListener('click', buttonClick);
</script>
</table>
</body>
</html>